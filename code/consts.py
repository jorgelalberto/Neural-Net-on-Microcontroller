from machine import Pin
import utime


class Waves:
    def __init__(self) -> None:
        # Formula: sin(2*pi*t/T) 
        self.sin = [512,   576,   639,   700,   759,   813,   862,
                   907,   944,   975,   999,  1015,  1023,  1023,
                  1015,   999,   975,   944,   907,   862,   813,
                   759,   700,   639,   576,   512,   448,   385,
                   324,   265,   211,   162,   117,    80,    49,
                    25,     9,     1,     1,     9,    25,    49,
                    80,   117,   162,   211,   265,   324,   385,
                   448]
        # Formula: step(t%T-T*1/4)-step(t%T-T*3/4) 
        self.square = [0,     0,     0,     0,     0,     0,     0,
                     0,     0,     0,     0,     0,     0,  1023,
                  1023,  1023,  1023,  1023,  1023,  1023,  1023,
                  1023,  1023,  1023,  1023,  1023,  1023,  1023,
                  1023,  1023,  1023,  1023,  1023,  1023,  1023,
                  1023,  1023,  1023,     0,     0,     0,     0,
                     0,     0,     0,     0,     0,     0,     0,
                     0 ]
        # Formula: 2*(t%T)/T-1 
        self.saw = [0,    20,    41,    61,    82,   102,   123,
                   143,   164,   184,   205,   225,   246,   266,
                   287,   307,   328,   348,   369,   389,   410,
                   430,   451,   471,   492,   512,   532,   553,
                   573,   594,   614,   635,   655,   676,   696,
                   717,   737,   758,   778,   799,   819,   840,
                   860,   881,   901,   922,   942,   963,   983,
                  1004]
        # Formula: 4*abs(t/T-floor(t/T+1/2))-1 
        self.triangle = [0,    41,    82,   123,   164,   205,   246,
                   287,   328,   369,   410,   451,   492,   532,
                   573,   614,   655,   696,   737,   778,   819,
                   860,   901,   942,   983,  1023,   983,   942,
                   901,   860,   819,   778,   737,   696,   655,
                   614,   573,   532,   492,   451,   410,   369,
                   328,   287,   246,   205,   164,   123,    82,
                    41]
        
        self.small = [0,    41,    82,   12,   14,   20,   24,
           287,   328,   369,   41,   45,   49,   53,
           57,   61,   65,   69,   73,   77,   81,
           86,   901,   942,   983,  1023,   93,   942,
           91,   80,   89,   78,   77,   69,   65,
           64,   53,   52,   42,   41,   41,   36,
           32,   28,   24,   25,   16,   13,    82,
            41]

    def get(self, wave):
        if wave == "sin":
            return self.sin
        elif wave == "square":
            return self.square
        elif wave == "saw":
            return self.saw
        elif wave == "triangle":
            return self.triangle
        elif wave == "small":
            return self.small
